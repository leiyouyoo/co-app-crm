<div class="inner-content py-20" id="table">
  <div class="list-content main-container">
    <div class="index-header-title">
      <div class="index-header-title-filter">
        <nz-select
          nzShowSearch
          nzAllowClear
          nzPlaceHolder="{{ 'Please select the customer name, the inquiry person' | translate }}"
          class="index-header-title-filter-perple"
          [(ngModel)]="quoteInputParams.Id"
          (ngModelChange)="(quoteInputParams.SkipCount == 0); search()"
        >
          <nz-option
            *ngFor="let item of customerAndUser"
            [nzValue]="item.customerId == null ? item.userId : item.customerId"
            [nzLabel]="item.name"
          ></nz-option>
        </nz-select>
        <nz-select
          nzAllowClear
          nzPlaceHolder="{{ 'QuotesStatus' | translate }}"
          class="index-header-title-filter-status"
          [(ngModel)]="quoteInputParams.Status"
          (ngModelChange)="(quoteInputParams.SkipCount == 0); search()"
        >
          <nz-option nzValue="" nzLabel="{{ 'All' | translate }}"></nz-option>
          <nz-option *ngFor="let item of quoteState" [nzValue]="item" [nzLabel]="QuoteState[item] | translate"> </nz-option>
        </nz-select>
        <div class="icon-all">
          <nz-select
            nzAllowClear
            nzPlaceHolder="{{ 'Trade Type' | translate }}"
            class="index-header-title-filter-status"
            [(ngModel)]="quoteInputParams.maoyiType"
            (ngModelChange)="searchByTradeType($event)"
          >
            <nz-option nzValue="0" nzLabel="{{ 'All' | translate }}"></nz-option>
            <nz-option nzValue="1" nzLabel="{{ 'General' | translate }}"></nz-option>
            <nz-option nzValue="2" nzLabel="{{ 'FBA/FBM' | translate }}"></nz-option>
          </nz-select>
          <nz-input-group class="index-header-title-filter-status" [nzSuffix]="suffixIconSearch">
            <input
              type="text"
              nz-input
              [placeholder]="'Quote No' | translate"
              appDebounceInput="300"
              (debounceInput)="search()"
              [(ngModel)]="quoteInputParams.QuoteNo"
            />
          </nz-input-group>
          <ng-template #suffixIconSearch>
            <i
              *ngIf="quoteInputParams.QuoteNo"
              nz-icon
              nzType="close-circle"
              (click)="quoteInputParams.QuoteNo = ''; search()"
              style="color: #aaa; cursor: pointer;"
            ></i>
          </ng-template>
          <button nz-button nzType="default" (click)="clearSearch()">{{ 'Clear' | translate }}</button>
          <!-- <div
            class="icon-air"
            (click)="quoteInputParams.isGeneral = !quoteInputParams.isGeneral; search()"
            [ngClass]="{ 'border-left': quoteInputParams.isGeneral }"
          >
            {{ 'General' | translate }}
          </div>
          <div
            class="icon-ocean"
            (click)="quoteInputParams.isFba = !quoteInputParams.isFba; search()"
            [ngClass]="{ 'border-right': quoteInputParams.isFba }"
          >
            {{ 'FBA/FBM' | translate }}
          </div> -->
        </div>

        <div class="list-content-action">
          <button nz-button nzType="primary" (click)="createinitiativequotes()">{{ 'Add Quotes' | translate }}</button>
        </div>
      </div>
    </div>
    <div class="content-list">
      <co-st
        #st
        style="height: 100%;"
        [data]="'/CRM/QuoteEnquiry/GetAllForCRM'"
        [req]="{
          params: quoteInputParams,
          method: 'get'
        }"
        [showCheckbox]="false"
        [showFilters]="false"
        [columns]="columns"
        [scroll]="{ x: '1700px' }"
        [total]="quotetotal"
        [page]="{ front: false }"
        calcScroll
      >
        <ng-template st-row="quoteNo" let-data>
          <span class="colorBlue">{{ data.quoteNo }}</span>
        </ng-template>
        <ng-template st-row="fType" let-data>
          <div *ngIf="data.freightMethodType === 1" class="colorBlue">
            <span class="iconfont icon-Ocean" nz-icon nzIconfont="icon-ocean"></span>
          </div>
          <div *ngIf="data.freightMethodType === 2">
            <span class="iconfont icon-airplane" nz-icon nzIconfont="icon-airplane"></span>
          </div>
        </ng-template>

        <ng-template st-row="addressFromModel" let-data>
          <div
            *ngIf="data.from.addressModel"
            style="width: 200px; height: 30px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;"
          >
            <span *ngIf="data.from.addressModel?.name"> {{ data.from?.addressModel?.name }} </span>
            <span *ngIf="data.from.addressModel?.streetAddress">{{ data.from.addressModel?.streetAddress }}</span>
            <span *ngIf="data.from.addressModel?.city">{{ data.from.addressModel?.city }} </span>
            <span *ngIf="data.from.addressModel?.province">{{ data.from.addressModel?.province }} </span>
            <span *ngIf="data.from.addressModel?.country">{{ data.from.addressModel?.country }}</span>
          </div>
          <div style="width: 200px; height: 30px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;">
            <span> {{ data.from?.portModel?.name }} </span>
            <span *ngIf="data.from?.portModel?.regionName">{{ data.from?.portModel?.regionName }} </span>
            <span *ngIf="data.form?.countryName"> {{ data.from?.portModel?.countryName }} </span>
          </div>
        </ng-template>
        <ng-template st-row="addressToModel" let-data>
          <div
            *ngIf="data.to.addressModel"
            style="width: 200px; height: 30px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;"
          >
            <span *ngIf="data.to.addressModel?.name"> {{ data.to?.addressModel?.name }} </span>
            <span *ngIf="data.to.addressModel?.streetAddress">{{ data.to.addressModel?.streetAddress }}</span>
            <span *ngIf="data.to.addressModel?.city">{{ data.to.addressModel?.city }} </span>
            <span *ngIf="data.to.addressModel?.province">{{ data.to.addressModel?.province }} </span>
            <span *ngIf="data.to.addressModel?.country">{{ data.to.addressModel?.country }}</span>
          </div>
          <div style="width: 200px; height: 30px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;">
            <span> {{ data.to?.portModel?.name }} </span>
            <span *ngIf="data.to?.portModel?.regionName">{{ data.to?.portModel?.regionName }} </span>
            <span *ngIf="data.to?.countryName"> {{ data.to?.portModel?.countryName }} </span>
          </div>
        </ng-template>
        <ng-template st-row="status" let-data>
          <span *ngIf="data.status == 1">
            <span class="jy-ocean-StartingPlace" [ngClass]="{ zise: true }"> </span> {{ 'Active' | translate }}
          </span>
          <span *ngIf="data.status == 2">
            <span class="jy-ocean-StartingPlace" [ngClass]="{ accept: true }"> </span>
            {{ 'Accept' | translate }}
          </span>
          <span *ngIf="data.status == 3">
            <span class="jy-ocean-StartingPlace" [ngClass]="{ expired: true }"> </span>
            {{ 'Expired' | translate }}
          </span>
          <span *ngIf="data.status == 4">
            <span class="jy-ocean-StartingPlace" [ngClass]="{ reject: true }"> </span>
            {{ 'Reject' | translate }}
          </span>
        </ng-template>
      </co-st>
    </div>
    <!-- <div class="d-flex justify-content-end">
      <nz-pagination
        style="text-align: right;"
        #nzpage
        [nzPageIndex]="quoteInputParams.pageIndex"
        [nzShowSizeChanger]="true"
        [nzTotal]="quotetotal"
        (nzPageSizeChange)="nzpage.nzPageIndex = 1; currentPageSizeChange($event)"
        [nzPageSize]="quoteInputParams.nzPageSize"
        (nzPageIndexChange)="pageIndexChange($event)"
        [nzShowQuickJumper]="false"
      >
      </nz-pagination>
    </div> -->
  </div>
</div>
<nz-modal
  nzWidth="70%"
  nzMaskClosable="false"
  class="createQuotes"
  [(nzVisible)]="isShowinitiativecreatequotes"
  [nzTitle]="'Add Quotes' | translate"
  (nzOnCancel)="createinitiativequotesCancel()"
>
  <initiativequotes-initiativecreatequotes
    *ngIf="isShowinitiativecreatequotes"
    (isSuccessfully)="createinitiativequotesSuccessfully($event)"
    (isClosed)="isClosed = $event"
    (initiaveQuoteStatus)="isinitiaveQuoteStatus = $event"
  >
  </initiativequotes-initiativecreatequotes>
  <div *nzModalFooter>
    <button nz-button nzType="default" (click)="createinitiativequotesCancel()">{{ 'Cancel' | translate }}</button>
    <button nz-button nzType="primary" type="submit" (click)="createinitiativequotesOk()" [nzLoading]="isinitiaveQuoteStatus">
      {{ 'Add Quotes' | translate }}
    </button>
  </div>
</nz-modal>

<nz-drawer
  [nzClosable]="false"
  [nzVisible]="isShowcreatequotes"
  nzPlacement="right"
  [nzTitle]="'Add Quotes' | translate"
  (nzOnClose)="createquotesCancel()"
>
  <quotes-createquotes
    [quoteinfo]="quoteinfo"
    *ngIf="isShowcreatequotes"
    (isSuccessfully)="isSuccessfully($event)"
    (isClosed)="isClosed = $event"
    (isQuoteStatus)="isQuoteStatus = $event"
  >
  </quotes-createquotes>

  <div *nzModalFooter>
    <button nz-button nzType="default" (click)="createquotesCancel()">{{ 'Cancel' | translate }}</button>
    <button nz-button nzType="primary" type="submit" (click)="createquotesOk()" [nzLoading]="isQuoteStatus">
      {{ 'Add Quotes' | translate }}
    </button>
  </div>
</nz-drawer>

<nz-modal nzMaskClosable="false" [(nzVisible)]="isShowcreaterecord" (nzOnCancel)="quotesrecordCancel()" nzWidth="70%">
  <quotes-quotesrecord
    *ngIf="isShowcreaterecord"
    [quoteId]="quoteId"
    [isShowtab]="isShowtab"
    (isSuccessfully)="isCreaterecordSuccessfully($event)"
    (isClosed)="isClosed = $event"
    (selSelectIndex)="selIndexnum($event)"
    (isQuoteRecordStatus)="isQuoteRecordStatus = $event"
  >
  </quotes-quotesrecord>
  <div *nzModalFooter>
    <button nz-button nzType="default" (click)="quotesrecordCancel()">{{ 'Cancel' | translate }}</button>
    <button nz-button nzType="primary" type="submit" (click)="quotesrecordOk()" *ngIf="selIndex == 1" [nzLoading]="isQuoteRecordStatus">
      {{ 'Add Quotes' | translate }}
    </button>
  </div>
</nz-modal>

<ng-template #shareModalFooter>
  <button
    nz-button
    nzType="default"
    nz-popover
    [copyDomToImage]="shareModalRef?.getContentComponent()?.downToImageRef?.nativeElement"
    [nzPopoverContent]="isIE() ? ('The current browser does not support, use Google or Firefox' | translate) : null"
    [disabled]="isIE()"
  >
    {{ 'Copy image' | translate }}
  </button>
  <button
    nz-button
    nzType="default"
    nz-popover
    [nzPopoverContent]="isIE() ? ('The current browser does not support, use Google or Firefox' | translate) : null"
    [disabled]="isIE()"
    (click)="downloadImage()"
  >
    {{ 'Download image' | translate }}
  </button>
  <button nz-button nzType="primary" (click)="copyLink()">{{ 'Copy link' | translate }}</button>
</ng-template>
