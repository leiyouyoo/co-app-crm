<nz-tabset [(nzSelectedIndex)]="selectIndex" [nzAnimated]="false" (nzSelectChange)="selIndex($event)">
  <nz-tab [nzTitle]="'Quotation record' | translate">
    <div class="content">
      <div style="height: 50px;">
        <input
          nz-input
          appDebounceInput="300"
          (debounceInput)="searchQuote($event)"
          placeholder="{{ 'Search Inquiry Code / Quotation Code' | translate }}"
          style="width: 20%;"
        />
      </div>
      <div
        style="
          width: 100%;
          height: 40px;
          display: flex;
          align-items: center;
          padding-left: 16px;
          background: rgba(239, 246, 255, 1);
          margin-bottom: 16px;
          color: #6d7278;
          border: 1px solid rgba(215, 227, 241, 1);
        "
      >
        <span class="iconfont icon-icon_remind" nz-icon nzIconfont="icon-info-fill"></span
        ><span class="tishi">{{
          'Tip: After selecting the quotation to be associated with the current booking business, the quotation will be sent to the customer synchronously'
            | translate
        }}</span>
      </div>
      <div class="freightType" *ngFor="let quoteinfo of relateQuotelist">
        <div class="f-type">
          <div class="f-quoteDate">
            <h2 style="margin-bottom: 0px; font-size: 16px; font-weight: bold;">{{ quoteinfo.quoteNo }}</h2>
            <div>
              {{ 'Inquiry date' | translate }}:<span>{{ quoteinfo.cargoReadyDate | date: 'yyy-MM-dd' }}</span>
            </div>
          </div>
          <div class="f-route">
            <div class="content-ocean">
              <!-- *ngIf="quoteinfo?.originAddress" -->
              <div class="content-ocean-pic" *ngIf="quoteinfo?.originAddress">
                <span class="jy-ocean-StartingPlace-none">
                  <span class="iconfont icon-locationnew" nz-icon nzIconfont="icon-location-outline" id="warehouse-first"></span>
                </span>
                <div class="horizontal-line"></div>
              </div>
              <div class="content-ocean-pic">
                <span class="jy-ocean-StartingPlace">
                  <span
                    class="iconfont icon-port"
                    nz-icon
                    nzIconfont="icon-vessel-freight"
                    *ngIf="quoteinfo.freightMethodType == freightMethodTypeValue.Ocean"
                  ></span>
                  <span
                    class="iconfont icon-airport"
                    nz-icon
                    nzIconfont="icon-air-freight"
                    *ngIf="quoteinfo.freightMethodType == freightMethodTypeValue.Air"
                  ></span>
                </span>
                <div class="horizontal-line"></div>
              </div>
              <div class="content-ocean-pic">
                <span class="jy-ocean-StartingPlace">
                  <span
                    class="iconfont icon-port"
                    nz-icon
                    nzIconfont="icon-vessel-freight"
                    *ngIf="quoteinfo.freightMethodType == freightMethodTypeValue.Ocean"
                  ></span>
                  <span
                    class="iconfont icon-airport"
                    nz-icon
                    nzIconfont="icon-air-freight"
                    *ngIf="quoteinfo.freightMethodType == freightMethodTypeValue.Air"
                  ></span>
                </span>
                <!-- *ngIf="quoteinfo?.destinationAddress" -->
                <div class="horizontal-line" *ngIf="quoteinfo?.destinationAddress"></div>
              </div>
              <!-- *ngIf="quoteinfo.destinationAddress" -->
              <div class="content-ocean-pic" *ngIf="quoteinfo.destinationAddress">
                <span class="jy-ocean-StartingPlace">
                  <span class="iconfont icon-locationnew nz-icon" nzIconfont="icon-location-outline"></span>
                </span>
              </div>
            </div>
            <div class="content-ocean-route">
              <div class="content-ocean-routeInfo" *ngIf="quoteinfo?.originAddress">
                <div *ngIf="quoteinfo.originAddress">
                  {{ quoteinfo?.originAddress?.streetAddress }}
                  <span *ngIf="quoteinfo.originAddress.city">,</span>
                  {{ quoteinfo?.originAddress?.city }}
                  <span *ngIf="quoteinfo.originAddress.province">,</span>
                  {{ quoteinfo?.originAddress?.province }}
                  <span *ngIf="quoteinfo.originAddress.country">,</span>
                  {{ quoteinfo?.originAddress?.country }}
                </div>
              </div>
              <div class="content-ocean-routeInfo">
                <div *ngIf="quoteinfo.originPort">
                  <div>{{ quoteinfo.originPort?.name }}</div>
                  <div>{{ quoteinfo.originPort?.regionName }}</div>
                </div>
                <div *ngIf="!quoteinfo.originPort">originPort</div>
              </div>
              <div class="content-ocean-routeInfo">
                <div *ngIf="quoteinfo.destinationPort">
                  <div>{{ quoteinfo.destinationPort?.name }}</div>
                  <div>{{ quoteinfo.destinationPort?.regionName }}</div>
                </div>
                <div *ngIf="!quoteinfo.destinationPort">destinationPort</div>
              </div>
              <div class="content-ocean-routeInfo" *ngIf="quoteinfo.destinationAddress">
                <div>
                  {{ quoteinfo?.destinationAddress?.streetAddress }}
                  <span *ngIf="quoteinfo.destinationAddress.city">,</span>
                  {{ quoteinfo?.destinationAddress?.city }}
                  <span *ngIf="quoteinfo.destinationAddress.province">,</span>
                  {{ quoteinfo?.destinationAddress?.province }}
                  <span *ngIf="quoteinfo.destinationAddress.country">,</span>
                  {{ quoteinfo?.destinationAddress?.country }}
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="f-quoteDetail">
          <div style="text-align: right; margin-right: 15px;">
            <button nz-button nzType="primary" (click)="copy(quoteinfo)">
              {{ 'Copy' | translate }}
            </button>
            <button nz-button nzType="primary" (click)="releteQuote(quoteinfo)">{{ 'Related' | translate }}</button>
          </div>
          <div class="quote-simpleInfo">
            <quote-quote-simple-info *ngIf="quoteinfo.id" [Id]="quoteinfo.id"> </quote-quote-simple-info>
          </div>
        </div>
      </div>
    </div>
  </nz-tab>
  <nz-tab [nzTitle]="'Add Quotes' | translate">
    <div class="add-content">
      <div class="freightType">
        <div class="f-type">
          <div>{{ 'Freight Method' | translate }}</div>
          <div *ngIf="quote_copy.freightType == 1">
            {{ 'CY-CY' | translate }}
          </div>
          <div *ngIf="quote_copy.freightType == 2">
            {{ 'CY-DOOR' | translate }}
          </div>
          <div *ngIf="quote_copy.freightType == 3">
            {{ 'DOOR-CY' | translate }}
          </div>
          <div *ngIf="quote_copy.freightType == 4">
            {{ 'DOOR-DOOR' | translate }}
          </div>
        </div>
        <div class="f-route">
          <div class="content-ocean">
            <!-- *ngIf="quote_copy?.originAddress" -->
            <div class="content-ocean-pic" *ngIf="quote_copy?.originAddress">
              <span class="jy-ocean-StartingPlace-none">
                <span class="iconfont icon-locationnew" nz-icon nzIconfont="icon-location-outline" id="warehouse-first"></span>
              </span>
              <div class="horizontal-line"></div>
            </div>
            <div class="content-ocean-pic">
              <span class="jy-ocean-StartingPlace">
                <span
                  class="iconfont icon-port"
                  nz-icon
                  nzIconfont="icon-vessel-freight"
                  *ngIf="quote_copy.freightMethodType == freightMethodTypeValue.Ocean"
                ></span>
                <span
                  class="iconfont icon-airport"
                  nz-icon
                  nzIconfont="icon-air-freight"
                  *ngIf="quote_copy.freightMethodType == freightMethodTypeValue.Air"
                ></span>
              </span>
              <div class="horizontal-line"></div>
            </div>
            <div class="content-ocean-pic">
              <span class="jy-ocean-StartingPlace">
                <span
                  class="iconfont icon-port"
                  nz-icon
                  nzIconfont="icon-vessel-freight"
                  *ngIf="quote_copy.freightMethodType == freightMethodTypeValue.Ocean"
                ></span>
                <span
                  class="iconfont icon-airport"
                  nz-icon
                  nzIconfont="icon-air-freight"
                  *ngIf="quote_copy.freightMethodType == freightMethodTypeValue.Air"
                ></span>
              </span>
              <!-- *ngIf="quote_copy?.destinationAddress" -->
              <div class="horizontal-line" *ngIf="quote_copy?.destinationAddress"></div>
            </div>
            <!-- *ngIf="quote_copy.destinationAddress" -->
            <div class="content-ocean-pic" *ngIf="quote_copy.destinationAddress">
              <span class="jy-ocean-StartingPlace">
                <span class="iconfont icon-locationnew" nz-icon nzIconfont="icon-location-outline"></span>
              </span>
            </div>
          </div>
          <div class="content-ocean-route">
            <div class="content-ocean-routeInfo" *ngIf="quote_copy?.originAddress">
              <div *ngIf="quote_copy.originAddress">
                {{ quote_copy?.originAddress?.streetAddress }}
                <span *ngIf="quote_copy.originAddress.city">,</span>
                {{ quote_copy?.originAddress?.city }}
                <span *ngIf="quote_copy.originAddress.province">,</span>
                {{ quote_copy?.originAddress?.province }}
                <span *ngIf="quote_copy.originAddress.country">,</span>
                {{ quote_copy?.originAddress?.country }}
              </div>
            </div>
            <div class="content-ocean-routeInfo">
              <div *ngIf="quote_copy.originPort">
                <div>{{ quote_copy.originPort?.name }}</div>
                <div>{{ quote_copy.originPort?.regionName }}</div>
              </div>
              <div *ngIf="!quote_copy.originPort">originPort</div>
            </div>
            <div class="content-ocean-routeInfo">
              <div *ngIf="quote_copy.destinationPort">
                <div>{{ quote_copy.destinationPort?.name }}</div>
                <div>{{ quote_copy.destinationPort?.regionName }}</div>
              </div>
              <div *ngIf="!quote_copy.destinationPort">
                destinationPort
              </div>
            </div>
            <div class="content-ocean-routeInfo" *ngIf="quote_copy.destinationAddress">
              <div>
                {{ quote_copy?.destinationAddress?.streetAddress }}
                <span *ngIf="quote_copy.destinationAddress.city">,</span>
                {{ quote_copy?.destinationAddress?.city }}
                <span *ngIf="quote_copy.destinationAddress.province">,</span>
                {{ quote_copy?.destinationAddress?.province }}
                <span *ngIf="quote_copy.destinationAddress.country">,</span>
                {{ quote_copy?.destinationAddress?.country }}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 1基础费用 -->
      <!-- 基础运费 整柜-->
      <form nz-form #basicData="ngForm">
        <div class="basic-cost" *ngIf="quote_copy.freightMethodType == freightMethodTypeValue.Ocean && quote_copy.shipmentType == 0">
          <h4>{{ 'Base cost' | translate }}</h4>
          <nz-table #editRowTable [nzData]="basiccost" [nzShowPagination]="false" class="originLocation" [nzScroll]="{ x: '1200px' }">
            <thead>
              <tr>
                <th>{{ 'Carrier' | translate }}</th>
                <th *ngFor="let item of containHavedataList">
                  {{ item.name }}
                </th>
                <th>{{ 'T/T' | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of basiccost; let i = index">
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <nz-select
                      nzShowSearch
                      [(ngModel)]="item.carrierId"
                      nzAllowClear
                      style="width: 80%;"
                      required
                      [name]="'carrierId' + i"
                      #carrierId="ngModel"
                    >
                      <nz-option [nzValue]="item.id" [nzLabel]="item.code" *ngFor="let item of carrierList"> </nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="carrier" [value]="carrierId"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;" *ngFor="let containHavedata of containHavedataList">
                  <div class="table-input">
                    <nz-input-number
                      required
                      [name]="containHavedata.name + i"
                      #contain="ngModel"
                      [nzPrecision]="3"
                      [nzMax]="999999999999999"
                      [(ngModel)]="item[containHavedata.name]"
                      [nzMin]="1"
                      [nzStep]="0.01"
                    >
                    </nz-input-number>
                    <!-- <input nz-input placeholder="Basic usage" [(ngModel)]="item[containHavedata.name]"
                                    required [name]="containHavedata.name+i" #contain="ngModel" /> -->
                  </div>
                  <div class="table-red">
                    <app-formvalidation [requiredName]="containHavedata.name" [value]="contain"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <input nz-input [(ngModel)]="item.transitTime" [name]="'transitTime' + i" #transitTime="ngModel" />
                  </div>
                </td>
              </tr>
            </tbody>
          </nz-table>
        </div>
        <!-- 基础运费 海运 散货 -->
        <div class="basic-cost" *ngIf="quote_copy.freightMethodType == freightMethodTypeValue.Ocean && quote_copy.shipmentType == 1">
          <h4>{{ 'Base cost' | translate }}</h4>
          <nz-table #editRowTable [nzData]="basiccost" [nzShowPagination]="false" class="originLocation" [nzScroll]="{ x: '1200px' }">
            <thead>
              <tr>
                <th>{{ 'Unit Price' | translate }}</th>
                <th>{{ 'Toll unit' | translate }}</th>
                <th>{{ 'computeFormula' | translate }}</th>
                <th *ngIf="basiccost[0].computeFormula == 4">{{ 'computeMode' | translate }}</th>
                <th>{{ 'Quantity' | translate }}</th>
                <th>{{ 'Total' | translate }}</th>
                <th>{{ 'Currency' | translate }}</th>
                <th>{{ 'Carrier' | translate }}</th>
                <th>{{ 'sailSchedule' | translate }}</th>
                <th>{{ 'Remark' | translate }}</th>
                <th>{{ 'T/T day' | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of basiccost; let i = index">
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <nz-input-number
                      required
                      [(ngModel)]="item.unitPrice"
                      [nzMin]="1"
                      [nzPrecision]="3"
                      [nzMax]="999999999999999"
                      [name]="'unitPrice' + i"
                      #unitPrice="ngModel"
                      (ngModelChange)="bulkcargo($event, item)"
                    >
                    </nz-input-number>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="Unit Price" [value]="unitPrice"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <nz-select
                      required
                      [(ngModel)]="item.unitType"
                      nzAllowClear
                      nzPlaceHolder=" {{ 'Choose' | translate }}"
                      [name]="'unitType' + i"
                      #unitType="ngModel"
                      (ngModelChange)="bulkcargo($event, item)"
                    >
                      <nz-option [nzValue]="4" [nzLabel]="'CBM' | translate"></nz-option>
                      <nz-option [nzValue]="3" [nzLabel]="'KG' | translate"></nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="unitType" [value]="unitType"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <nz-select
                      required
                      [(ngModel)]="item.computeFormula"
                      nzAllowClear
                      nzPlaceHolder=" {{ 'Choose' | translate }}"
                      [name]="'computeFormula' + i"
                      #computeFormula="ngModel"
                      (ngModelChange)="bulkcargo($event, item); item.computeMode = 1"
                    >
                      <nz-option [nzValue]="1" nzLabel="实际重量(KG)" *ngIf="item.unitType == 3"> </nz-option>
                      <nz-option [nzValue]="4" nzLabel="计费吨(RT)" *ngIf="item.unitType == 3"> </nz-option>
                      <nz-option [nzValue]="3" nzLabel="实际体积(CBM)" *ngIf="item.unitType == 4"> </nz-option>
                      <nz-option [nzValue]="4" nzLabel="计费吨(RT)" *ngIf="item.unitType == 4"> </nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="computeFormula" [value]="computeFormula"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;" *ngIf="basiccost[0].computeFormula == 4">
                  <div class="table-input">
                    <nz-select
                      [(ngModel)]="item.computeMode"
                      nzAllowClear
                      nzPlaceHolder=" {{ 'Choose' | translate }}"
                      [name]="'computeMode' + i"
                      #computeMode="ngModel"
                      (ngModelChange)="bulkcargo($event, item)"
                    >
                      <nz-option [nzValue]="1" nzLabel="1cbm:167kg" *ngIf="item.unitType == 3"> </nz-option>
                      <nz-option [nzValue]="2" nzLabel="1cbm:363kg" *ngIf="item.unitType == 4"> </nz-option>
                      <nz-option [nzValue]="3" nzLabel="1cbm:500kg" *ngIf="item.unitType == 4"> </nz-option>
                      <nz-option [nzValue]="4" nzLabel="1cbm:750kg" *ngIf="item.unitType == 4"> </nz-option>
                      <nz-option [nzValue]="5" nzLabel="1cbm:1000kg" *ngIf="item.unitType == 4"> </nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <!-- <app-formvalidation requiredName="computeMode" [value]="computeMode">
                                </app-formvalidation> -->
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <nz-input-number
                      required
                      [(ngModel)]="item.quantity"
                      [nzMin]="1"
                      [nzPrecision]="3"
                      [nzMax]="999999999999999"
                      [name]="'quantity' + i"
                      #quantity="ngModel"
                    >
                    </nz-input-number>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="quantity" [value]="quantity"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <nz-input-number
                      required
                      [(ngModel)]="item.totalPrice"
                      [nzMin]="1"
                      [nzPrecision]="3"
                      [nzMax]="999999999999999"
                      [name]="'totalPrice' + i"
                      #totalPrice="ngModel"
                    >
                    </nz-input-number>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="totalPrice" [value]="totalPrice"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <nz-select
                      required
                      [(ngModel)]="item.currencyId"
                      nzAllowClear
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                      [name]="'currencyId' + i"
                      #currencyId="ngModel"
                    >
                      <nz-option [nzValue]="item.id" *ngFor="let item of currencyList" [nzLabel]="item.name"> </nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="currencyId" [value]="currencyId"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <nz-select
                      required
                      nzShowSearch
                      [(ngModel)]="item.carrierId"
                      nzAllowClear
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                      [name]="'carrierId' + i"
                      #carrierId="ngModel"
                    >
                      <nz-option [nzValue]="item.id" [nzLabel]="item.code" *ngFor="let item of carrierList"> </nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="carrierId" [value]="carrierId"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <input required nz-input [(ngModel)]="item.sailSchedule" [name]="'sailSchedule' + i" #sailSchedule="ngModel" />
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="sailSchedule" [value]="sailSchedule"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <input nz-input [(ngModel)]="item.remark" [name]="'remark' + i" #remark="ngModel" />
                  </div>
                  <div class="table-red"></div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <input nz-input [(ngModel)]="item.transitTime" [name]="'transitTime' + i" #transitTime="ngModel" />
                  </div>
                </td>
              </tr>
            </tbody>
          </nz-table>
        </div>

        <!-- 基础运费 空运 散货 -->
        <div class="basic-cost" *ngIf="quote_copy.freightMethodType == freightMethodTypeValue.Air">
          <h4>{{ 'Base cost' | translate }}</h4>
          <nz-table #editRowTable [nzData]="basiccost" [nzShowPagination]="false" class="originLocation" [nzScroll]="{ x: '1200px' }">
            <thead>
              <tr>
                <th>{{ 'Unit Price' | translate }}</th>
                <th>{{ 'computeFormula' | translate }}</th>
                <th *ngIf="basiccost[0].computeFormula == 2">{{ 'computeMode' | translate }}</th>
                <th>{{ 'Quantity' | translate }}</th>
                <th>{{ 'Total' | translate }}</th>
                <th>{{ 'Currency' | translate }}</th>
                <th>{{ 'airline' | translate }}</th>
                <th>{{ 'Remark' | translate }}</th>
                <th>{{ 'T/T day' | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of basiccost; let i = index">
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <nz-input-number
                      required
                      [(ngModel)]="item.unitPrice"
                      [name]="'unitPrice' + i"
                      [nzPrecision]="3"
                      [nzMax]="999999999999999"
                      #unitPrice="ngModel"
                      [nzMin]="1"
                    >
                    </nz-input-number>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="Unit Price" [value]="unitPrice"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <nz-select
                      required
                      [(ngModel)]="item.computeFormula"
                      nzAllowClear
                      nzPlaceHolder=" {{ 'Choose' | translate }}"
                      (ngModelChange)="calculatetotal($event, item); item.computeMode = 1"
                      [name]="'computeFormula' + i"
                      #computeFormula="ngModel"
                    >
                      <nz-option [nzValue]="1" nzLabel="实际重量(KG)"></nz-option>
                      <nz-option [nzValue]="2" nzLabel="计费重量(KG)"></nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="computeFormula" [value]="computeFormula"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;" *ngIf="basiccost[0].computeFormula == 2">
                  <div class="table-input" *ngIf="item.computeMode">
                    <nz-select
                      *ngIf="basiccost[0].computeFormula == 2"
                      [(ngModel)]="item.computeMode"
                      nzAllowClear
                      nzPlaceHolder=" {{ 'Choose' | translate }}"
                      (ngModelChange)="calculatetotal($event, item)"
                      [name]="'computeMode' + i"
                      #computeMode="ngModel"
                    >
                      <nz-option [nzValue]="1" nzLabel="1CBM:167KG"></nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <!-- <app-formvalidation requiredName="computeMode" [value]="computeMode">
                                </app-formvalidation> -->
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <input required nz-input [(ngModel)]="item.quantity" [name]="'quantity' + i" #quantity="ngModel" />
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="quantity" [value]="quantity"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <nz-input-number
                      required
                      [(ngModel)]="item.totalPrice"
                      [nzMin]="1"
                      [nzPrecision]="3"
                      [nzMax]="999999999999999"
                      [name]="'totalPrice' + i"
                      #totalPrice="ngModel"
                    >
                    </nz-input-number>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="totalPrice" [value]="totalPrice"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <nz-select
                      required
                      [(ngModel)]="item.currencyId"
                      nzAllowClear
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                      [name]="'currencyId' + i"
                      #currencyId="ngModel"
                    >
                      <nz-option [nzValue]="currency.id" *ngFor="let currency of currencyList" [nzLabel]="currency.name"></nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="currencyId" [value]="currencyId"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <nz-select
                      required
                      [(ngModel)]="item.carrierId"
                      nzShowSearch
                      nzAllowClear
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                      [name]="'carrierId' + i"
                      #carrierId="ngModel"
                    >
                      <nz-option [nzValue]="item.id" [nzLabel]="item.code" *ngFor="let item of airList"> </nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="carrierId" [value]="carrierId"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <input nz-input [(ngModel)]="item.remark" [name]="'remark' + i" #remark="ngModel" />
                  </div>
                  <div class="table-red"></div>
                </td>
                <td style="min-width: 120px; height: 70px;">
                  <div class="table-input">
                    <input nz-input [(ngModel)]="item.transitTime" [name]="'transitTime' + i" #transitTime="ngModel" />
                  </div>
                </td>
              </tr>
            </tbody>
          </nz-table>
        </div>
      </form>
      <!-- 2起始地费用 -->
      <!-- 起始地费用 整柜 (quoteinfo.freightType==3||quoteinfo.freightType==4)-->
      <form nz-form #startingplacData="ngForm">
        <div class="originlocation" *ngIf="quote_copy.freightMethodType == freightMethodTypeValue.Ocean && quote_copy.shipmentType == 0">
          <h4>{{ 'Origin cost' | translate }}</h4>
          <nz-table #editRowTable [nzData]="startingplace" [nzShowPagination]="false" class="originLocation">
            <thead>
              <tr>
                <th style="min-width: 120px;">{{ 'Feename' | translate }}</th>
                <th style="min-width: 120px;">{{ 'Currency' | translate }}</th>
                <th style="min-width: 120px;">{{ 'Unit' | translate }}</th>
                <ng-container *ngIf="checkTicket(startingplace)">
                  <th style="min-width: 120px;">{{ 'Price' | translate }}</th>
                </ng-container>
                <ng-container *ngIf="checkContaniner(startingplace); else elseTemplate">
                  <th *ngFor="let item of containHavedataList">
                    {{ item.name }}
                  </th>
                </ng-container>
                <ng-template #elseTemplate> </ng-template>
                <th style="min-width: 120px;">{{ 'Remark' | translate }}</th>
                <th style="min-width: 120px;">{{ 'Action' | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of startingplace; trackBy: trackByIndex; index as i; last as last">
                <td style="min-width: 120px;">
                  <div class="table-input">
                    <nz-select
                      [required]="quote_copy.freightType == 3 || quote_copy.freightType == 4"
                      [(ngModel)]="item.chargingCodeId"
                      [name]="'chargingCodeId' + i"
                      #chargingCodeId="ngModel"
                      nzAllowClear
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                      (ngModelChange)="verificationChargestartplace($event, item)"
                    >
                      <nz-option [nzValue]="item.id" [nzLabel]="item.name" *ngFor="let item of costItemList"> </nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <div *ngIf="isSameChargeCode && sameIndex == i + 1" class="red">
                      {{ 'the chargeCode is repeat' | translate }}
                    </div>
                    <app-formvalidation requiredName="chargingCodeId" [value]="chargingCodeId"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px;">
                  <div class="table-input">
                    <nz-select
                      [required]="quote_copy.freightType == 3 || quote_copy.freightType == 4"
                      [(ngModel)]="item.currencyId"
                      [name]="'currencyId' + i"
                      #currencyId="ngModel"
                      nzAllowClear
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                    >
                      <nz-option [nzValue]="item.id" [nzLabel]="item.name" *ngFor="let item of currencyList"> </nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="currencyId" [value]="currencyId"> </app-formvalidation>
                  </div>
                </td>
                <td style="min-width: 120px;">
                  <div class="table-input">
                    <nz-select
                      [(ngModel)]="item.unitType"
                      [name]="'unitType' + i"
                      #unitType="ngModel"
                      [required]="quote_copy.freightType == 3 || quote_copy.freightType == 4"
                      nzAllowClear
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                      (ngModelChange)="repret(item)"
                    >
                      <nz-option [nzValue]="2" [nzLabel]="'Ticket' | translate"></nz-option>
                      <nz-option [nzValue]="1" [nzLabel]="'ContainType' | translate"></nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="unitType" [value]="unitType"> </app-formvalidation>
                  </div>
                </td>
                <ng-container *ngIf="checkTicket(startingplace)">
                  <td style="min-width: 120px;" [ngClass]="{ notClickn: item.unitType == 1 }">
                    <div class="table-input">
                      <nz-input-number
                        [required]="item.unitType == 2 && (quote_copy.freightType == 3 || quote_copy.freightType == 4)"
                        [(ngModel)]="item.unitPrice"
                        [nzMin]="1"
                        [nzPrecision]="3"
                        [nzMax]="999999999999999"
                        [name]="'unitPrice' + i"
                        #unitPrice="ngModel"
                      >
                      </nz-input-number>
                    </div>
                    <div class="table-red">
                      <app-formvalidation requiredName="unitPrice" [value]="unitPrice"> </app-formvalidation>
                    </div>
                  </td>
                </ng-container>

                <ng-container *ngIf="checkContaniner(startingplace)">
                  <td
                    style="min-width: 120px;"
                    *ngFor="let containHavedata of containHavedataList"
                    [ngClass]="{ notClickn: item.unitType == 2 }"
                  >
                    <div class="table-input">
                      <nz-input-number
                        [required]="item.unitType == 1 && (quote_copy.freightType == 3 || quote_copy.freightType == 4)"
                        [name]="containHavedata.name + i"
                        [nzPrecision]="3"
                        [nzMax]="999999999999999"
                        #contain="ngModel"
                        [(ngModel)]="item[containHavedata.name]"
                        [nzMin]="1"
                        [nzStep]="0.01"
                      >
                      </nz-input-number>
                    </div>
                    <div class="table-red">
                      <app-formvalidation [requiredName]="containHavedata.name" [value]="contain"> </app-formvalidation>
                    </div>
                  </td>
                </ng-container>

                <td>
                  <input nz-input [(ngModel)]="item.remark" [name]="'remark' + i" #remark="ngModel" />
                </td>
                <td style="min-width: 120px;">
                  <span class="iconfont icon-plus" nz-icon nzIconfont="icon-add-fill" (click)="addOrigin()"></span>
                  <span
                    class="iconfont icon-Delete"
                    nz-icon
                    nzIconfont="icon-delete"
                    (click)="deleteOrigin(i)"
                    *ngIf="startingplace.length > 1"
                  ></span>
                </td>
              </tr>
            </tbody>
          </nz-table>
        </div>
      </form>
      <!-- 起始地费用  海运散货  空运散货 (quoteinfo.freightType==3||quoteinfo.freightType==4)-->
      <form nz-form #startingplacData="ngForm">
        <div
          *ngIf="
            (quote_copy.freightMethodType == freightMethodTypeValue.Ocean && quote_copy.shipmentType == 1) ||
            quote_copy.freightMethodType == freightMethodTypeValue.Air
          "
        >
          <h4>{{ 'Origin cost' | translate }}</h4>
          <nz-table #editRowTable [nzData]="startingplace" [nzShowPagination]="false" class="originLocation">
            <thead>
              <tr>
                <th>{{ 'Price' | translate }}<span class="red"> *</span></th>
                <th>{{ 'Toll unit' | translate }}<span class="red"> *</span></th>
                <th>{{ 'Currency' | translate }}<span class="red"> *</span></th>
                <th>{{ 'Feename' | translate }}</th>
                <th>{{ 'Remark' | translate }}</th>
                <th>{{ 'Action' | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of startingplace; trackBy: trackByIndex; index as i; last as last">
                <td>
                  <div class="table-input">
                    <nz-input-number
                      [required]="quote_copy.freightType == 3 || quote_copy.freightType == 4"
                      [(ngModel)]="item.unitPrice"
                      [nzMin]="1"
                      [nzPrecision]="3"
                      [nzMax]="999999999999999"
                      [name]="'unitPrice' + i"
                      #unitPrice="ngModel"
                    >
                    </nz-input-number>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="unitPrice" [value]="unitPrice"> </app-formvalidation>
                  </div>
                </td>
                <td>
                  <div class="table-input">
                    <nz-select
                      [(ngModel)]="item.unitType"
                      [name]="'unitType' + i"
                      [required]="quote_copy.freightType == 3 || quote_copy.freightType == 4"
                      #unitType="ngModel"
                      nzAllowClear
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                    >
                      <nz-option [nzValue]="2" [nzLabel]="'Ticket' | translate"></nz-option>
                      <nz-option [nzValue]="4" [nzLabel]="'CBM' | translate"></nz-option>
                      <nz-option [nzValue]="3" [nzLabel]="'KG' | translate"></nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="unitType" [value]="unitType"> </app-formvalidation>
                  </div>
                </td>
                <td>
                  <div class="table-input">
                    <nz-select
                      [(ngModel)]="item.currencyId"
                      [required]="quote_copy.freightType == 3 || quote_copy.freightType == 4"
                      [name]="'currencyId' + i"
                      #currencyId="ngModel"
                      nzAllowClear
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                    >
                      <nz-option [nzValue]="item.id" *ngFor="let item of currencyList" [nzLabel]="item.name"> </nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="currencyId" [value]="currencyId"> </app-formvalidation>
                  </div>
                </td>
                <td>
                  <div class="table-input">
                    <nz-select
                      [required]="quote_copy.freightType == 3 || quote_copy.freightType == 4"
                      [(ngModel)]="item.chargingCodeId"
                      [name]="'chargingCodeId' + i"
                      #chargingCodeId="ngModel"
                      nzAllowClear
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                      (ngModelChange)="verificationChargestartplace($event, item)"
                    >
                      <nz-option [nzValue]="item.id" [nzLabel]="item.name" *ngFor="let item of costItemList"> </nz-option>
                    </nz-select>
                  </div>

                  <div class="table-red">
                    <div *ngIf="isSameChargeCode && sameIndex == i + 1" class="red">
                      {{ 'the chargeCode is repeat' | translate }}
                    </div>
                    <app-formvalidation requiredName="chargingCodeId" [value]="chargingCodeId"> </app-formvalidation>
                  </div>
                </td>
                <td>
                  <input nz-input [(ngModel)]="item.remark" [name]="'remark' + i" #remark="ngModel" />
                </td>
                <td>
                  <span class="iconfont icon-plus" nz-icon nzIconfont="icon-add-fill" (click)="addOrigin()"></span>
                  <span
                    class="iconfont icon-Delete"
                    nz-icon
                    nzIconfont="icon-delete"
                    (click)="deleteOrigin(i)"
                    *ngIf="startingplace.length > 1"
                  ></span>
                </td>
              </tr>
            </tbody>
          </nz-table>
        </div>
      </form>

      <!-- 3目的地费用 -->
      <!-- 目的地费用  整柜 &&(quoteinfo.freightType==2||quoteinfo.freightType==4)-->
      <form nz-form #endplaceplacData="ngForm">
        <div class="originlocation" *ngIf="quote_copy.freightMethodType == freightMethodTypeValue.Ocean && quote_copy.shipmentType == 0">
          <h4>{{ 'Destination cost' | translate }}</h4>
          <nz-table #editRowTable [nzData]="endplace" [nzShowPagination]="false" class="originLocation">
            <thead>
              <tr>
                <th>{{ 'Feename' | translate }}</th>
                <th>{{ 'Currency' | translate }}</th>
                <th>{{ 'Unit' | translate }}</th>
                <ng-container *ngIf="checkTicket(endplace)">
                  <th>{{ 'Price' | translate }}</th>
                </ng-container>

                <ng-container *ngIf="checkContaniner(endplace); else elseTemplate">
                  <th *ngFor="let item of containHavedataList">
                    {{ item.name }}
                  </th>
                </ng-container>
                <ng-template #elseTemplate> </ng-template>
                <th>{{ 'Remark' | translate }}</th>
                <th>{{ 'Action' | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of endplace; trackBy: trackByIndex; index as i; last as last">
                <td>
                  <div class="table-input">
                    <nz-select
                      [required]="quote_copy.freightType == 2 || quote_copy.freightType == 4"
                      [(ngModel)]="item.chargingCodeId"
                      #chargingCodeId="ngModel"
                      [name]="'chargingCodeId' + i"
                      nzAllowClear
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                      (ngModelChange)="verificationChargeendplace($event, item)"
                    >
                      <nz-option [nzValue]="item.id" [nzLabel]="item.name" *ngFor="let item of costItemList"> </nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <div *ngIf="isSameChargeCodeByEnd && sameEndIndex == i + 1" class="red">
                      {{ 'the chargeCode is repeat' | translate }}
                    </div>
                    <app-formvalidation requiredName="chargingCodeId" [value]="chargingCodeId"> </app-formvalidation>
                  </div>
                </td>
                <td>
                  <div class="table-input">
                    <nz-select
                      [required]="quote_copy.freightType == 2 || quote_copy.freightType == 4"
                      [(ngModel)]="item.currencyId"
                      [name]="'currencyId' + i"
                      #currencyId="ngModel"
                      nzAllowClear
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                    >
                      <nz-option [nzValue]="item.id" [nzLabel]="item.name" *ngFor="let item of currencyList"> </nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="currencyId" [value]="currencyId"> </app-formvalidation>
                  </div>
                </td>
                <td>
                  <div class="table-input">
                    <nz-select
                      [(ngModel)]="item.unitType"
                      [name]="'unitType' + i"
                      #unitType="ngModel"
                      [required]="quote_copy.freightType == 2 || quote_copy.freightType == 4"
                      nzAllowClear
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                      (ngModelChange)="repret(item)"
                    >
                      <nz-option [nzValue]="2" [nzLabel]="'Ticket' | translate"></nz-option>
                      <nz-option [nzValue]="1" [nzLabel]="'ContainType' | translate"></nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="unitType" [value]="unitType"> </app-formvalidation>
                  </div>
                </td>

                <ng-container *ngIf="checkTicket(endplace)">
                  <td [ngClass]="{ notClickn: item.unitType == 1 }">
                    <div class="table-input">
                      <nz-input-number
                        [(ngModel)]="item.unitPrice"
                        [name]="'unitPrice' + i"
                        [nzPrecision]="3"
                        [nzMax]="999999999999999"
                        [required]="item.unitType == 2 && (quote_copy.freightType == 2 || quote_copy.freightType == 4)"
                        #unitPrice="ngModel"
                        [nzMin]="1"
                        [nzStep]="1"
                      >
                      </nz-input-number>
                    </div>
                    <div class="table-red">
                      <app-formvalidation requiredName="unitPrice" [value]="unitPrice"> </app-formvalidation>
                    </div>
                  </td>
                </ng-container>

                <ng-container *ngIf="checkContaniner(endplace)">
                  <td *ngFor="let containHavedata of containHavedataList" [ngClass]="{ notClickn: item.unitType == 2 }">
                    <div class="table-input">
                      <nz-input-number
                        [required]="item.unitType == 1 && (quote_copy.freightType == 2 || quote_copy.freightType == 4)"
                        [name]="containHavedata.name + i"
                        [nzPrecision]="3"
                        [nzMax]="999999999999999"
                        #contain="ngModel"
                        [(ngModel)]="item[containHavedata.name]"
                        [nzMin]="1"
                        [nzStep]="0.01"
                      >
                      </nz-input-number>
                      <!-- <input nz-input placeholder="Basic usage" [name]="containHavedata.name+i"
                                    [required]="item.unitType==1" #contain="ngModel"
                                    [(ngModel)]="item[containHavedata.name]" /> -->
                    </div>
                    <div class="table-red">
                      <app-formvalidation [requiredName]="containHavedata.name" [value]="contain"> </app-formvalidation>
                    </div>
                  </td>
                </ng-container>
                <td>
                  <input nz-input [name]="'remark' + i" #remark="ngModel" [(ngModel)]="item.remark" />
                </td>
                <td>
                  <span class="iconfont icon-plus" nz-icon nzIconfont="icon-add-fill" (click)="addDestination()"></span>
                  <span
                    class="iconfont icon-Delete"
                    nz-icon
                    nzIconfont="icon-delete"
                    (click)="deleteDestination(i)"
                    *ngIf="endplace.length > 1"
                  ></span>
                </td>
              </tr>
            </tbody>
          </nz-table>
        </div>
      </form>
      <!-- 目的地费用 海运散货 空运 &&(quoteinfo.freightType==2||quoteinfo.freightType==4) -->
      <form nz-form #endplaceplacData="ngForm">
        <div
          *ngIf="
            (quote_copy.freightMethodType == freightMethodTypeValue.Ocean && quote_copy.shipmentType == 1) ||
            quote_copy.freightMethodType == freightMethodTypeValue.Air
          "
        >
          <h4>{{ 'Destination cost' | translate }}</h4>
          <nz-table #editRowTable [nzData]="endplace" [nzShowPagination]="false" class="originLocation">
            <thead>
              <tr>
                <th>{{ 'Price' | translate }}<span class="red"> *</span></th>
                <th>{{ 'Toll unit' | translate }}<span class="red"> *</span></th>
                <th>>{{ 'Currency' | translate }}<span class="red"> *</span></th>
                <th>{{ 'Feename' | translate }}</th>
                <th>{{ 'Remark' | translate }}</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of endplace; trackBy: trackByIndex; index as i; last as last">
                <td>
                  <div class="table-input">
                    <nz-input-number
                      [(ngModel)]="item.unitPrice"
                      [required]="quote_copy.freightType == 2 || quote_copy.freightType == 4"
                      #unitPrice="ngModel"
                      [nzPrecision]="3"
                      [nzMax]="999999999999999"
                      [name]="'unitPrice' + i"
                      [nzMin]="1"
                    >
                    </nz-input-number>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="unitPrice" [value]="unitPrice"> </app-formvalidation>
                  </div>
                </td>
                <td>
                  <div class="table-input">
                    <nz-select
                      [(ngModel)]="item.unitType"
                      [required]="quote_copy.freightType == 2 || quote_copy.freightType == 4"
                      #unitType="ngModel"
                      [name]="'unitType' + i"
                      nzAllowClear
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                    >
                      <nz-option [nzValue]="2" [nzLabel]="'Ticket' | translate"></nz-option>
                      <nz-option [nzValue]="4" [nzLabel]="'CBM' | translate"></nz-option>
                      <nz-option [nzValue]="3" [nzLabel]="'KG' | translate"></nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="unitType" [value]="unitType"> </app-formvalidation>
                  </div>
                </td>
                <td>
                  <div class="table-input">
                    <nz-select
                      [(ngModel)]="item.currencyId"
                      [required]="quote_copy.freightType == 2 || quote_copy.freightType == 4"
                      [name]="'currencyId' + i"
                      #currencyId="ngModel"
                      nzAllowClear
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                    >
                      <nz-option [nzValue]="item.id" *ngFor="let item of currencyList" [nzLabel]="item.name"> </nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <app-formvalidation requiredName="currencyId" [value]="currencyId"> </app-formvalidation>
                  </div>
                </td>
                <td>
                  <div class="table-input">
                    <nz-select
                      [required]="quote_copy.freightType == 2 || quote_copy.freightType == 4"
                      [(ngModel)]="item.chargingCodeId"
                      [name]="'chargingCodeId' + i"
                      #chargingCodeId="ngModel"
                      nzAllowClear
                      (ngModelChange)="verificationChargeendplace($event, item)"
                      nzPlaceHolder="{{ 'Choose' | translate }}"
                    >
                      <nz-option [nzValue]="item.id" [nzLabel]="item.name" *ngFor="let item of costItemList"> </nz-option>
                    </nz-select>
                  </div>
                  <div class="table-red">
                    <div *ngIf="isSameChargeCodeByEnd && sameEndIndex == i + 1" class="red">
                      {{ 'the chargeCode is repeat' | translate }}
                    </div>
                    <app-formvalidation requiredName="chargingCodeId" [value]="chargingCodeId"> </app-formvalidation>
                  </div>
                </td>
                <td>
                  <div class="table-input">
                    <input nz-input #remark="ngModel" [name]="'remark' + i" [(ngModel)]="item.remark" />
                  </div>
                </td>
                <td>
                  <span class="iconfont icon-plus" nz-icon nzIconfont="icon-add-fill" (click)="addDestination()"></span>
                  <span
                    class="iconfont icon-Delete"
                    nz-icon
                    nzIconfont="icon-delete"
                    (click)="deleteDestination(i)"
                    *ngIf="endplace.length > 1"
                  ></span>
                </td>
              </tr>
            </tbody>
          </nz-table>
        </div>
      </form>
      <!-- 报价有效日期 -->
      <form nz-form #vaildDate="ngForm" style="padding-left: 16px;">
        <div style="display: flex; margin-top: 16px;">
          <div style="display: flex; align-items: center;">
            <h5 style="min-width: 200px;">{{ 'Quote Effective Date' | translate }}<span class="red">*</span></h5>
          </div>
          <div style="width: 40%; display: flex;">
            <div>
              <nz-date-picker
                [nzDisabledDate]="disabledDate"
                [(ngModel)]="basiccost[0].validStartDate"
                required
                #validStartDate="ngModel"
                name="validStartDate"
                style="margin-right: 16px;"
                (ngModelChange)="compareDate(basiccost[0].validStartDate, basiccost[0].validEndDate)"
              >
              </nz-date-picker>
              <app-formvalidation requiredName="validStartDate" [value]="validStartDate"> </app-formvalidation>
              <div class="red" *ngIf="!isDateMatch">
                {{ 'validStartDate cannot be before validEndDate' | translate }}
              </div>
            </div>

            <div style="display: flex; align-items: center; width: 10%; height: 30px; justify-content: center;">
              - - -
            </div>
            <div>
              <nz-date-picker
                [nzDisabledDate]="disabledDate"
                [(ngModel)]="basiccost[0].validEndDate"
                required
                #validEndDate="ngModel"
                name="validEndDate"
                style="margin-left: 16px;"
                (ngModelChange)="compareDate(basiccost[0].validStartDate, basiccost[0].validEndDate)"
              >
              </nz-date-picker>
              <app-formvalidation requiredName="validEndDate" [value]="validEndDate"> </app-formvalidation>
              <div class="red" *ngIf="!isDateMatch">
                {{ 'validStartDate cannot be before validEndDate' | translate }}
              </div>
            </div>
          </div>
        </div>
      </form>

      <form nz-form #formData="ngForm" style="padding-left: 16px;">
        <div style="display: flex; margin-top: 20px;">
          <div style="min-width: 400px; display: flex; align-items: center; margin-right: 20px;">
            <h5 style="min-width: 200px;">{{ 'Quotation acceptance customer' | translate }}<span class="red">*</span></h5>
            <div style="width: 100%;">
              <nz-select
                style="width: 100%;"
                [(ngModel)]="_quoteinfo.ownerCustomerId"
                required
                #ownerCustomerIdRec="ngModel"
                name="ownerCustomerIdRec"
                nzAllowClear
                (ngModelChange)="selCustomer($event)"
              >
                <nz-option [nzValue]="item.id" [nzLabel]="item.name" *ngFor="let item of customerList"> </nz-option>
              </nz-select>
              <app-formvalidation requiredName="ownerCustomerId" [value]="ownerCustomerIdRec"> </app-formvalidation>
            </div>
          </div>
          <div style="width: 400px; display: flex; align-items: center;">
            <h5 style="min-width: 120px;">{{ 'Offer recipient' | translate }}<span class="red">*</span></h5>
            <div style="width: 100%;">
              <nz-select
                style="width: 100%;"
                [(ngModel)]="_quoteinfo.ownerUserId"
                required
                #ownerUserIdRec="ngModel"
                name="ownerUserIdRec"
                nzAllowClear
                [nzCustomTemplate]="recipientTemplate"
              >
                <nz-option
                  [nzValue]="item.userId"
                  [appNzOptionExtra]="item"
                  [nzLabel]="item.name + item.surname"
                  *ngFor="let item of contacts"
                >
                </nz-option>
              </nz-select>
              <ng-template #recipientTemplate let-selected>
                {{ selected.template._appExtra.name }}{{ selected.template._appExtra.surname }}
              </ng-template>
              <app-formvalidation requiredName="ownerUserId" [value]="ownerUserIdRec"> </app-formvalidation>
            </div>
          </div>
        </div>
      </form>
    </div>
  </nz-tab>
</nz-tabset>

<nz-modal
  nzMaskClosable="false"
  [(nzVisible)]="isShowReleteTab"
  (nzOnOk)="releteQuoteOk()"
  (nzOnCancel)="isShowReleteTab = false"
  nzWidth="65%"
>
  <form nz-form #personData="ngForm">
    <div style="display: flex; margin-top: 16px;">
      <div style="width: 8%; display: flex; align-items: center;">
        <h5>{{ 'Quotation acceptance customer' | translate }}<span class="red">*</span></h5>
      </div>
      <div style="width: 20%;">
        <nz-select
          style="width: 100%;"
          [(ngModel)]="_quoteinfo.ownerCustomerId"
          required
          #ownerCustomerId="ngModel"
          name="ownerCustomerId"
          nzAllowClear
          nzPlaceHolder="{{ 'Choose' | translate }}"
          (ngModelChange)="selCustomer($event)"
        >
          <nz-option [nzValue]="item.id" [nzLabel]="item.name" *ngFor="let item of customerList"></nz-option>
        </nz-select>
        <app-formvalidation requiredName="ownerCustomerId" [value]="ownerCustomerId"> </app-formvalidation>
      </div>
      <div style="width: 8%; display: flex; align-items: center; margin-left: 30px;">
        <h5>{{ 'Offer recipient' | translate }}<span class="red">*</span></h5>
      </div>
      <div style="width: 20%;">
        <nz-select
          style="width: 100%;"
          [(ngModel)]="_quoteinfo.ownerUserId"
          required
          #ownerUserId="ngModel"
          name="ownerUserId"
          nzAllowClear
          nzPlaceHolder="{{ 'Choose' | translate }}"
          (ngModelChange)="selContacts($event)"
          [nzCustomTemplate]="modelrecipientTemplate"
        >
          <nz-option
            [nzValue]="item.userId"
            [nzLabel]="item.name + item.surname"
            [appNzOptionExtra]="item"
            *ngFor="let item of contacts"
          ></nz-option>
        </nz-select>
        <ng-template #modelrecipientTemplate let-selected>
          {{ selected.template._appExtra.name }}{{ selected.template._appExtra.surname }}
        </ng-template>
        <app-formvalidation requiredName="ownerUserId" [value]="ownerUserId"> </app-formvalidation>
      </div>
    </div>
  </form>
  <div *nzModalFooter>
    <button nz-button nzType="default" (click)="isShowReleteTab = false">{{ 'Cancel' | translate }}</button>
    <button nz-button nzType="primary" type="submit" (click)="releteQuoteOk()" [nzLoading]="releteStatus">{{ 'Save' | translate }}</button>
  </div>
</nz-modal>
